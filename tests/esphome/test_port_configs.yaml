substitutions:
  device_name: test-port-configs
  friendly_name: Test Port Configs

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp32:
  board: esp32dev
  framework:
    type: arduino

logger:
  level: DEBUG

external_components:
  - source:
      type: local
      path: ../../components
    components: [three_way_valve]

stepper:
  - platform: a4988
    id: stepper1
    step_pin: GPIO19
    dir_pin: GPIO18
    max_speed: 250 steps/s

  - platform: a4988
    id: stepper2
    step_pin: GPIO21
    dir_pin: GPIO22
    max_speed: 250 steps/s

  - platform: a4988
    id: stepper3
    step_pin: GPIO23
    dir_pin: GPIO25
    max_speed: 250 steps/s

  - platform: a4988
    id: stepper4
    step_pin: GPIO26
    dir_pin: GPIO27
    max_speed: 250 steps/s

# Test different port configurations
valve:
  # Configuration 1: supply=1, buffer=2, return=3
  - platform: three_way_valve
    name: "Valve Config 1-2-3"
    id: valve_123
    stepper: stepper1
    gear_ratio: 4.888888889
    motor_steps_per_rev: 200
    ports:
      supply: 1
      buffer: 2
      return: 3

  # Configuration 2: supply=1, return=2, buffer=3
  - platform: three_way_valve
    name: "Valve Config 1-3-2"
    id: valve_132
    stepper: stepper2
    gear_ratio: 4.888888889
    motor_steps_per_rev: 200
    ports:
      supply: 1
      return: 2
      buffer: 3

  # Configuration 3: buffer=1, supply=2, return=3
  - platform: three_way_valve
    name: "Valve Config 2-1-3"
    id: valve_213
    stepper: stepper3
    gear_ratio: 4.888888889
    motor_steps_per_rev: 200
    ports:
      buffer: 1
      supply: 2
      return: 3

  # Configuration 4: return=1, supply=2, buffer=3
  - platform: three_way_valve
    name: "Valve Config 3-1-2"
    id: valve_312
    stepper: stepper4
    gear_ratio: 4.888888889
    motor_steps_per_rev: 200
    ports:
      return: 1
      supply: 2
      buffer: 3
